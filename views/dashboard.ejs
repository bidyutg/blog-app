<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Your Articles</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <header>
    <h1>🗒️ Your Articles</h1>
    <nav>
      <a href="/article/create">➕ Create New Article</a> |
      <a href="/logout">🚪 Logout</a>
    </nav>
  </header>

  <main>
    <% if (articles.length === 0) { %>
      <p>You have no articles yet.</p>
    <% } else { %>
      <div class="articles-container">
        <% articles.forEach(function(article) { %>
          <div class="article-card">
            <h3><%= article.title %></h3>

            <!-- Short Preview -->
            <p id="short-content-<%= article._id %>">
              <%= article.content.substring(0, 150) %>...
            </p>

            <!-- Full Content (Initially hidden) -->
            <div id="full-content-<%= article._id %>" class="full-content">
              <p><%= article.content %></p>
            </div>

            <!-- Article Image -->
            <% if (article.image) { %>
              <img src="<%= article.image %>" alt="Article Image" class="article-image">
            <% } %>

            <!-- Toggle Button -->
            <button id="see-more-btn-<%= article._id %>" onclick="toggleContent('<%= article._id %>')">See More</button>

            <!-- Action Buttons -->
            <div class="button-group">
              <a href="/article/edit/<%= article._id %>" class="edit-btn">✏️ Edit</a>
              <form action="/article/delete/<%= article._id %>" method="POST" onsubmit="return confirm('Are you sure you want to delete this article?');" style="display:inline;">
                <button type="submit" class="delete-btn">🗑️ Delete</button>
              </form>
            </div>
          </div>
        <% }) %>
      </div>
    <% } %>
  </main>

  <script src="/script.js"></script>
</body>
</html>
